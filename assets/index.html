<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>
  </head>
  <body>
    Pyodide test page <br />
    Open your browser console to see Pyodide output
    <script type="text/javascript">
      async function main(code) {
        try {
          let pyodide = await loadPyodide()
          console.log(
            pyodide.runPython(`
            import sys
            sys.version
        `)
          )
          var result = pyodide.runPython(code)
          sendMessageToFlutter('Success: ' + result)
        } catch (error) {
          sendMessageToFlutter('Error: ' + error)
        }
      }
      function sendMessageToFlutter(message) {
        window.parent.postMessage(message, '*')
      }
      window.addEventListener('message', (message) => {
        console.log(`message: ${message.data}`)
        main(message.data)
      })
    </script>
  </body>
</html>
